---
sidebar_position: 2
---

import useBaseUrl from '@docusaurus/useBaseUrl';
import Admonition from '@theme/Admonition';

# AWS - Cloud Storage Access

Prerequisites:
- You need to have permissions to run the AWS CloudFormation template
- You need to have permissions to create roles and policies in AWS

## Video Walkthrough: 
<br />
<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/oysb7Kef0Bk"
  title="Add an Acces Connector and External Location in AWS Databricks"
  frameBorder="0"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

## Step-by-step guide

### How to Create an S3 Bucket in the AWS Console

1. Navigate to the [AWS console](https://console.aws.amazon.com/)
2. In the search bar, type **S3**
3. Select **S3** from the search results
4. Click **Create bucket**

<div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/aws/aws_create_buttom_s3bucket.png')} 
  alt="create s3"
  style={{width: '50%', height: 'auto'}}
  
  />
</div>

<br />


5. Complete the configuration form with the following required information:
   - **Bucket name**: Provide a descriptive name for the bucket
   - **Object ownership**: ACLS Disable
   - **Block public access**: block all public access
   - **Bucker versioning**: Disable
   - **Tags**: opitionals but recommended
   - **Default encryption**: server side encryption with Amazon S3 Managed Keys (SSE-S3)
   - **Bucket key**: Disable
   

<div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/aws/s3bucketoptoins_part1.png')} 
  alt="s3bucketoptoins_part1"
  style={{width: '70%', height: 'auto'}}
  
  />
</div>

   <div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/aws/s3bucketoptoins_part2.png')} 
  alt="s3bucketoptoins_part2"
  style={{width: '70%', height: 'auto'}}
  
  />
</div>

<br />

### How to create an external location in Databricks

1. Navigate to the Databricks workspace
2. In the left sidebar, click on "Catalog" and then click on "External Data"

<div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/aws/aws_external_data_buttom.png')} 
  alt="external data buttom"
  style={{width: '80%', height: 'auto'}}
  
  />
</div>
<br />

3. Click on "Create external location"

<div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/aws/create_externallocation_buttom.png')} 
  alt="create external location buttom"
  style={{width: '70%', height: 'auto'}}
  
  />
</div>
<br />


4. Select the AWS QuickStart and click on "Next"

<div style={{textAlign: 'left'}}>
<br />
  <img src={useBaseUrl('/img/aws/external_location_quickstart_option.png')} 
  alt="quickstart option"
  style={{width: '70%', height: 'auto'}}
  
  />
</div>
<br />

5. Fill the bucket name and click on "Generate new token": s3://`<existing-bucket-name>` and copy the tokan

<div style={{textAlign: 'left'}}>
<br />
  <img src={useBaseUrl('/img/aws/s3_quickstart_form.png')} 
  alt="quickstart form"
  style={{width: '50%', height: 'auto'}}
  
  />
</div>
<br />
6. Paste the token in the "Databricks Personal Access Token" field and click on "I acknowledge that aws cloud formation might create iam resources with custom names" and click on create stack

<div style={{textAlign: 'left'}}>
<br />
  <img src={useBaseUrl('/img/aws/quickstarttemplate_part1.png')} 
  alt="quickstart form"
  style={{width: '80%', height: 'auto'}}
  
  />
</div>
<br />

<div style={{textAlign: 'left'}}>
<br />
  <img src={useBaseUrl('/img/aws/quickstarttemplate_part2.png')} 
  alt="quickstart form"
  style={{width: '80%', height: 'auto'}}
  
  />
</div>
<br />

### How to Create a New Catalog in Databricks

#### Create a New Catalog in Databricks Video Walkthrough
<br />
<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/1aci_ePLi4o"
  title="Add an Acces Connector and External Location in Databricks"
  frameBorder="0"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

:::tip Catalog Organization
Catalogs are the top-level containers in Unity Catalog's three-level namespace (catalog.schema.table). Plan your catalog structure to align with your data governance strategy.
:::


1. In your Databricks workspace, navigate to "Catalog" in the left sidebar
2. Click on the "Catalogs" tab to view existing catalogs
3. Click "Create catalog" to start the catalog creation process

<div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/azure/catalog_creation.png')} 
  alt="Create Catalog Button"
  style={{width: '50%', height: 'auto'}}
   />
</div>


4. Complete the catalog configuration form:
   - **Catalog Name**: Provide a descriptive name that reflects the data domain (e.g., "sales_data", "customer_analytics")
   - **Comment**: Add a description explaining the catalog's purpose and data scope
   - **Storage Location**: Optionally specify a default storage location using your external location
   - **Owner**: Set the catalog owner (defaults to current user)

5. Click "Create" to establish the new catalog

<div style={{textAlign: 'left'}}>
  <img src={useBaseUrl('/img/azure/catalog_form.png')} 
  alt="Catalog Configuration Form"
  style={{width: '50%', height: 'auto'}}
   />
</div>

:::note Next Steps
After creating your catalog, you can create schemas within it and start organizing your data assets according to your governance policies.
:::

<br />